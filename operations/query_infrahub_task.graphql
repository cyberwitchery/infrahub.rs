query QueryInfrahubTask($limit: Int, $offset: Int, $related_node__ids: [String], $branch: String, $state: [StateType], $workflow: [String], $ids: [String], $q: String, $log_limit: Int, $log_offset: Int) {
  InfrahubTask(limit: $limit, offset: $offset, related_node__ids: $related_node__ids, branch: $branch, state: $state, workflow: $workflow, ids: $ids, q: $q, log_limit: $log_limit, log_offset: $log_offset) {
    ...TasksFields
  }
}

fragment TaskLogEdgeFields on TaskLogEdge {
  edges {
    ...TaskLogNodesFields
  }
  count
  __typename
}

fragment TaskLogFields on TaskLog {
  message
  severity
  task_id
  timestamp
  id
  __typename
}

fragment TaskLogNodesFields on TaskLogNodes {
  node {
    ...TaskLogFields
  }
  __typename
}

fragment TaskNodeFields on TaskNode {
  id
  title
  conclusion
  state
  progress
  workflow
  branch
  created_at
  updated_at
  parameters
  tags
  start_time
  related_node
  related_node_kind
  related_nodes {
    ...TaskRelatedNodeFields
  }
  logs {
    ...TaskLogEdgeFields
  }
  __typename
}

fragment TaskNodesFields on TaskNodes {
  node {
    ...TaskNodeFields
  }
  __typename
}

fragment TaskRelatedNodeFields on TaskRelatedNode {
  id
  kind
  __typename
}

fragment TasksFields on Tasks {
  edges {
    ...TaskNodesFields
  }
  count
  __typename
}
